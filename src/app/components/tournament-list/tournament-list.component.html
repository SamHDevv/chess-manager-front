<div class="tournament-list-container">
  <header class="page-header">
    <div class="header-content">
      <div class="header-text">
        <h1>Lista de torneos</h1>
        <p>Explora y reg√≠strate en los torneos de ajedrez</p>
      </div>
      @if (authService.isAuthenticated()) {
        <a routerLink="/tournaments/create" class="create-tournament-btn">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none">
            <path d="M12 5V19M5 12H19" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
          </svg>
          Crear Torneo
        </a>
      }
    </div>
  </header>

  <!-- Loading State -->
  @if (loading()) {
    <div class="loading-state">
      <p>Cargando torneos...</p>
    </div>
  }

  <!-- Error State -->
  @if (error()) {
    <div class="error-state">
      <p>Error al cargar torneos: {{ error() }}</p>
      <button (click)="loadTournaments()" class="retry-button">
        Reintentar
      </button>
    </div>
  }

  <!-- Success State -->
  @if (!loading() && !error() && tournaments().length > 0) {
    <!-- Search Bar -->
    <div class="search-container">
      <div class="search-input">
        <svg class="search-icon" width="20" height="20" viewBox="0 0 24 24" fill="none">
          <path d="M21 21L15 15M17 10C17 13.866 13.866 17 10 17C6.13401 17 3 13.866 3 10C3 6.13401 6.13401 3 10 3C13.866 3 17 6.13401 17 10Z" 
                stroke="currentColor" 
                stroke-width="2" 
                stroke-linecap="round" 
                stroke-linejoin="round"/>
        </svg>
        <input 
          type="text" 
          class="search-field" 
          placeholder="Buscar torneos por nombre, descripci√≥n o ubicaci√≥n..."
          [value]="searchQuery()"
          (input)="onSearchChange($event)"
        />
      </div>
    </div>

    <!-- Filters -->
    <div class="filters">
      <button 
        class="filter-button"
        [class.active]="selectedFilter() === 'all'"
        (click)="setFilter('all')">
        Todos ({{ tournaments().length }})
      </button>
      <button 
        class="filter-button"
        [class.active]="selectedFilter() === 'upcoming'"
        (click)="setFilter('upcoming')">
        Pr√≥ximos ({{ upcomingTournaments().length }})
      </button>
      <button 
        class="filter-button"
        [class.active]="selectedFilter() === 'ongoing'"
        (click)="setFilter('ongoing')">
        En curso ({{ ongoingTournaments().length }})
      </button>
    </div>

    <!-- Tournament Grid -->
    <div class="tournaments-grid">
      @for (tournament of filteredTournaments(); track tournament.id) {
        <div class="tournament-card">
          <div class="tournament-image">
            <div class="placeholder-image">‚ôî</div>
            <div class="tournament-status" [attr.data-status]="tournament.status">
              {{ getStatusLabel(tournament.status) }}
            </div>
          </div>
          
          <div class="tournament-info">
            <h3>
              <a [routerLink]="['/tournaments', tournament.id]" class="tournament-title-link">
                {{ tournament.name }}
              </a>
            </h3>
            
            @if (tournament.description) {
              <p class="tournament-description">{{ tournament.description }}</p>
            }
            
            <div class="tournament-details">
              <div class="detail-item">
                <span class="label">üìÖ Inicio:</span>
                <span>{{ formatDate(tournament.startDate) }}</span>
              </div>
              <div class="detail-item">
                <span class="label">üìç Lugar:</span>
                <span>{{ tournament.location }}</span>
              </div>
              <div class="detail-item">
                <span class="label">üèÜ Formato:</span>
                <span>{{ getTournamentFormatLabel(tournament.tournamentFormat) }}</span>
              </div>
              @if (tournament.maxParticipants) {
                <div class="detail-item">
                  <span class="label">üë• M√°ximo:</span>
                  <span>{{ tournament.maxParticipants }} jugadores</span>
                </div>
              }
            </div>

            <div class="tournament-actions">
              @if (tournament.status === 'upcoming') {
                <button class="btn btn-primary" [routerLink]="['/tournaments', tournament.id]">
                  Ver detalles
                </button>
              } @else if (tournament.status === 'ongoing') {
                <button class="btn btn-secondary" [routerLink]="['/tournaments', tournament.id]">
                  Ver partidas
                </button>
              } @else {
                <button class="btn btn-outline" [routerLink]="['/tournaments', tournament.id]">
                  Ver resultados
                </button>
              }
            </div>
          </div>
        </div>
      }
    </div>
  }

  <!-- Empty State -->
  @if (!loading() && !error() && tournaments().length === 0) {
    <div class="empty-state">
      <h3>No hay torneos disponibles</h3>
      <p>Vuelve pronto para ver nuevos torneos de ajedrez</p>
    </div>
  }
</div>
<header class="app-header">
  <div class="header-content">
    <!-- Left Section: Logo + Navigation -->
    <div class="header-left">
      <!-- Logo Section -->
      <div class="logo-section">
        <div class="logo-icon">
          <svg width="32" height="32" viewBox="0 0 32 32" fill="none">
            <circle cx="16" cy="16" r="13.33" fill="#137FEC"/>
            <path d="M12 10h8l-2 4h-4l-2-4zM10 16h12l-1 6h-10l-1-6z" fill="white"/>
          </svg>
        </div>
        <h1 class="app-title" routerLink="/tournaments">{{ title() }}</h1>
      </div>

      <!-- Navigation -->
      <nav class="nav">
        <a routerLink="/inicio" class="nav-link">Inicio</a>
        <a routerLink="/tournaments" routerLinkActive="active" class="nav-link">Torneos</a>
        <a routerLink="/jugadores" class="nav-link">Jugadores</a>
        <a routerLink="/acerca" class="nav-link">Acerca</a>
      </nav>
    </div>

    <!-- Right Section: Search + User Actions -->
    <div class="header-right">
      <!-- Search Bar -->
      <div class="search-container">
        <div class="search-input">
          <svg class="search-icon" width="24" height="24" viewBox="0 0 24 24" fill="none">
            <path d="M21 21L16.5 16.5M19 11C19 15.4183 15.4183 19 11 19C6.58172 19 3 15.4183 3 11C3 6.58172 6.58172 3 11 3C15.4183 3 19 6.58172 19 11Z" stroke="#9CA3AF" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
          </svg>
          <input type="text" placeholder="Busca el Borneo" class="search-field">
        </div>
      </div>

      <!-- User Actions -->
      <div class="user-actions">
        @if (authService.isAuthenticated()) {
          <!-- Authenticated User -->
          <!-- Notifications Button -->
          <button class="notification-btn">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
              <path d="M18 8A6 6 0 0 0 6 8c0 7-3 9-3 9h18s-3-2-3-9" stroke="#6B7280" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
              <path d="M13.73 21a2 2 0 0 1-3.46 0" stroke="#6B7280" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
          </button>

          <!-- User Menu -->
          <div class="user-menu" [class.open]="showUserMenu()" (click)="toggleUserMenu()">
            <div class="user-avatar">
              <span class="avatar-initials">{{ getUserInitials() }}</span>
            </div>
            
            @if (showUserMenu()) {
              <div class="user-dropdown">
                <div class="user-info">
                  <p class="user-name">{{ authService.currentUser()?.firstName || 'Usuario' }}</p>
                  <p class="user-email">{{ authService.currentUser()?.email }}</p>
                </div>
                <hr class="dropdown-divider">
                <button class="dropdown-item" (click)="navigateToProfile()">
                  <svg width="16" height="16" viewBox="0 0 24 24" fill="none">
                    <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                    <circle cx="12" cy="7" r="4" stroke="currentColor" stroke-width="2"/>
                  </svg>
                  Mi Perfil
                </button>
                @if (isAdmin()) {
                  <button class="dropdown-item admin-item" (click)="navigateToAdminPanel()">
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none">
                      <path d="M12 1L3 5v6c0 5.55 3.84 10.74 9 12 5.16-1.26 9-6.45 9-12V5l-9-4z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                      <path d="M9 12l2 2 4-4" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                    </svg>
                    Panel de Admin
                  </button>
                }
                <button class="dropdown-item" (click)="logout()">
                  <svg width="16" height="16" viewBox="0 0 24 24" fill="none">
                    <path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                    <polyline points="16,17 21,12 16,7" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                    <line x1="21" y1="12" x2="9" y2="12" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                  </svg>
                  Cerrar Sesión
                </button>
              </div>
            }
          </div>
        } @else {
          <!-- Not Authenticated -->
          <div class="auth-buttons">
            <a routerLink="/login" class="auth-btn login-btn">Iniciar Sesión</a>
            <a routerLink="/register" class="auth-btn register-btn">Registro</a>
          </div>
        }
      </div>
    </div>
  </div>
</header>